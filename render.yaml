services:
  # Web Service
  - type: web
    name: masjid-salman-al-farsi
    env: node
    buildCommand: npm run build
    startCommand: npm start
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
    plan: free
    
  # Pre-build hook for dependencies
  - type: prebuild
    name: install-deps
    command: npm ci --only=production

# Build optimization
build:
  baseDirectory: ./
  nodeVersion: 20
  npmVersion: 10
  
# Environment variables
environment:
  NODE_ENV: production
  NEXT_TELEMETRY_DISABLED: 1
